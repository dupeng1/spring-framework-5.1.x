org.springframework.beans：包含了操作Java bean的接口和类
org.springframework.beans.annotation：提供对Java注解处理
org.springframework.beans.propertyeditors：属性编辑器，用来将string类型的值转换为object类型
org.springframework.beans.support：org.springframework.beans的支持包，比如一组bean的排序和保存工具类
org.springframework.beans.factory：实现spring轻量级IOC容器的核心包
org.springframework.beans.factory.annotation：配置基于注解的bean
2、初始化bean
AbstractApplicationContext.refresh
AbstractRefreshableApplicationContext.refreshBeanFactory()
AbstractRefreshableApplicationContext.createBeanFactory->DefaultListableBeanFactory
AbstractRefreshableApplicationContext.loadBeanDefinitions
AbstractXmlApplicationContext.loadBeanDefinitions
XMLBeanDefinitionReader.loadBeanDefinitions
DefaultBeanDefinitionDocumentReader.parseBeanDefinitions
DefaultBeanDefinitionDocumentReader.parseDefaultElement
3、bean的加载（MyTestBean myTestBean = (MyTestBean) beanFactory.getBean("myTestBean");）
Spring通过调用BeanFactory的getBean()方法来加载bean，getBean()方法真正实现再类AbstractBeanFactory中
AbstractBeanFactory.doGetBean
4、ApplicationContext Bean生命周期
BeanFactory和ApplicationContext是Spring两种很重要的容器，前者提供了最基本的依赖注入支持，后者在继承前者的基础进行了拓展
，例如增加了时间传播，资源访问，国际化消息访问等功能
-首先容器启动后，会对scope为singleton且非延迟加载的bean进行实例化，
-按照Bean定义信息配置信息，注入所有的属性
-如果Bean实现了BeanNameAware接口，会回调该接口的setBeanName()方法，传入该Bean的id，此时该Bean就获得了自己在配置文件中的id
-如果Bean实现了BeanFactoryAware接口，会回调该接口的setBeanFactory()方法，传入该Bean的BeanFactory，这样该Bean就获得了自己所在的BeanFactory
-如果Bean实现了ApplicationContextAware接口，会回调该接口的setApplicationContext()方法，传入该Bean的ApplicationContext，
这样该Bean就获得了自己所在的ApplicationContext
-如果有Bean实现了BeanPostProcessor接口，则会回调该接口的postProcessBeforeInitialzation()方法
-如果Bean实现了InitializingBean接口，则会回调该接口的afterPropertiesSet()方法
-如果Bean配置了init-method方法，则会执行init-method配置的方法
-如果有Bean实现了BeanPostProcessor接口，则会回调该接口的postProcessAfterInitialization()方法
-可以正式使用该Bean了，对于scope为singleton的Bean，Spring的IoC容器中会缓存一份该bean的实例，而对于scope为prototype的Bean，
每次被调用都会new一个新的对象，其生命周期就交给调用方管理了，不再是Spring容器进行管理了
-容器关闭后，如果Bean实现了DisposableBean接口，则会回调该接口的destroy()方法
-如果Bean配置了destroy-method方法，则会执行destroy-method配置的方法，至此，整个Bean的生命周期结束
5、BeanFactory Bean生命周期
-容器寻找Bean的定义信息，并将其实例化
-使用依赖注入，Spring按照Bean定义信息配置Bean的所有属性
-如果Bean实现了BeanNameAware接口，工厂调用Bean的setBeanName()方法传递Bean的id
-如果实现了BeanFactoryAware接口，工厂调用setBeanFactory()方法传入工厂自身
-如果BeanPostProcessor和Bean关联，那么它们的postProcessBeforeInitialization()方法将被调用。（需要手动进行注册！）
-如果Bean实现了InitializingBean接口，则会回调该接口的afterPropertiesSet()方法
-如果Bean指定了init-method方法，就会调用init-method方法
-如果BeanPostProcessor和Bean关联，那么它的postProcessAfterInitialization()方法将被调用。（需要手动注册！）
-现在Bean已经可以使用了。scope为singleton的Bean缓存在Spring IOC容器中。scope为prototype的Bean生命周期交给客户端
-销毁。如果Bean实现了DisposableBean接口，destory()方法将会被调用。如果配置了destory-method方法，就调用这个方法
6、bean的生命周期
实例化、属性赋值、初始化、销毁
-InstantiationAwareBeanPostProcessor：bean实例化前、实例化后、bean属性注入DI时调用方法
postProcessBeforeInstantiation：在bean实例化前调用，相当于new这个bean之前，也是第一次扩展后置处理器的调用时机
AbstractAutowireCapableBeanFactory#createBean
AbstractAutowireCapableBeanFactory#resolveBeforeInstantiation
postProcessAfterInstantiation：在bean实例化后、属性赋值前调用，相当于new这个bean之后，第五次扩展后置处理器的调用时机
postProcessPropertyValues：@Autowired在这里进行DI，将获取的属性封装在PropertyValues的实例对象pvs中，
AbstractAutowireCapableBeanFactory#createBean
AbstractAutowireCapableBeanFactory#doCreateBean
bean已经实例化完成，在属性注入时阶段触发，第六次扩展后置处理器的调用时机
-SmartInstantiationAwareBeanPostProcessor
determineCandidateConstructors：选举出合适的构造函数对象，第二次扩展后置处理器的方法
getEarlyBeanReference：解决循环依赖，提前暴露一个工厂，工厂是三级缓存，第四次扩展后置处理器的方法
AbstractAutowireCapableBeanFactory#createBean
AbstractAutowireCapableBeanFactory#doCreateBean
-MergedBeanDefinitionPostProcessor
postProcessMergedBeanDefinition：第三次扩展后置处理器的方法
AbstractAutowireCapableBeanFactory#applyMergedBeanDefinitionPostProcessors
-DestructionAwareBeanPostProcessor
postProcessBeforeDestruction：Bean销毁之前的回调方法，第九次扩展后置处理器的方法
ApplicationListenerDetector用于处理ApplicationListener的添加和销毁
InitDestroyAnnotationBeanPostProcessor用于处理@PostConstruct和@PreDestroy
ScheduledAnnotationBeanPostProcessor用于处理@Scheduled注解
requiresDestruction()判断是否需要进行销毁，一般情况下都是需要的
7、继承关系
BeanFactory
HierarchicalBeanFactory继承BeanFactory
ConfigurableBeanFactory继承HierarchicalBeanFactory、SingletonBeanRegistry
AbstractBeanFactory实现ConfigurableBeanFactory，
支持可配置功能

AutowireCapableBeanFactory继承BeanFactory
AbstractAutowireCapableBeanFactory继承AbstractBeanFactory，实现AutowireCapableBeanFactory
支持可自动注入功能

ConfigurableListableBeanFactory集成ListableBeanFactory、AutowireCapableBeanFactory、ConfigurableBeanFactory
DefaultListableBeanFactory继承AbstractAutowireCapableBeanFactory，实现ConfigurableListableBeanFactory





